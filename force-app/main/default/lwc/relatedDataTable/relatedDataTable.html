<!--
  @description       : 
  @author            : ChangeMeIn@UserSettingsUnder.SFDoc
  @group             : 
  @last modified on  : 03-25-2022
  @last modified by  : ChangeMeIn@UserSettingsUnder.SFDoc
-->
<template>
      <div style="position: absolute; opacity: 1;" class="ModelTooltip" onmouseover={handleMouseOver} onmouseout={handlemouseout}>            
            <section class="slds-popover slds-popover_panel" role="dialog"><!--slds-nubbin_top-left-->
                  <div class="container"  style="width: 1489px;; overflow-y: hidden;"> <!--max-height: 197.35px;-->
                        <article class="slds-card">
                              <div class="slds-card__header slds-grid">
                                    <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                          <div class="slds-media__figure">
                                                <span title={childObjectLabel}>
                                                      <lightning-icon icon-name={icon} title={childObjectLabel}></lightning-icon>
                                                <span class="slds-assistive-text">{childObjectLabel}</span>
                                                </span>
                                          </div>
                                          <div class="slds-media__body">
                                                <h2 class="slds-card__header-title">
                                                      <a href="#" class="slds-card__header-link slds-truncate" title={childObjectLabel}>
                                                      <span >{childObjectLabel}</span>
                                                      </a>
                                                </h2>
                                                <p class="slds-page-header__name-meta">
                                                      {objSize} items • Sorted by Created Date • 
                                                </p>
                                          </div>
                                          <div class="slds-no-flex">
                                                <lightning-button variant="base" label="New" title="New" onclick={showNewRecordForm} class="slds-m-left_x-small"></lightning-button>
                                          </div>
                                    </header>
                              </div>

                              <template if:true={showNewForm}>
                                  <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                                     <div class="slds-modal__container">
                                          <!-- Modal/Popup Box LWC header here -->
                                          <header class="slds-modal__header">
                                               <lightning-button variant="base" label="Close" title="Close" onclick={closeModal}>
                                                      <lightning-icon icon-name="utility:close"
                                                      alternative-text="close"
                                                      variant="inverse"
                                                      size="small" ></lightning-icon>
                                                <span class="slds-assistive-text">Close</span>
                                                </lightning-button>                                                
                                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Create New Record</h2>
                                          </header>
                                              <!-- Modal/Popup Box LWC body starts here -->
                                              <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                                <c-related-fields record-id={recordId} object-api-name={childObjectName}></c-related-fields>
                                              </div>
                                              <!-- Modal/Popup Box LWC footer starts here -->
                                              <footer class="slds-modal__footer">
                                                 <lightning-button variant="base" label="Cancel" title="Cancel"  onclick={closeModal}>
                                               </lightning-button>
                                              </footer>
                                    </div>
                                      </section>
                                      <div class="slds-backdrop slds-backdrop_open"></div>
                             </template> 
                             <div class="slds-card__body slds-card__body_inner">
                                    <lightning-datatable
                                          key-field="id"
                                          hide-checkbox-column
                                          data={data}
                                          columns={cols}
                                          onrowaction={handleRowAction}>  
                                    </lightning-datatable>
                                    <template if:false={isData}>
                                         <Center><p style="padding: 10px;">No items to display.</p></Center> 
                                    </template>
                              </div>
                              <footer class="slds-card__footer slds-text-align_center">
                                    <a class="slds-card__footer-action" onclick={handleclick} id={childObjectName} name={childObjectName} href="#">View All
                                          <span class="slds-assistive-text">{childObjectLabel}</span></a>
                              </footer>
                        </article>
                        
                  </div>
            </section>
      </div>
</template>